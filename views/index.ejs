<html>
<head>
	<title>CryptoWatson</title>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<!-- stylesheets for bubbles -->
	<link rel="stylesheet" media="all" href="stylesheets/setup.css">
	<link rel="stylesheet" media="all" href="stylesheets/says.css">
	<link rel="stylesheet" media="all" href="stylesheets/reply.css">
	<link rel="stylesheet" media="all" href="stylesheets/typing.css">
	<link rel="stylesheet" media="all" href="stylesheets/input.css">
	<style>
		h1 { text-align: center; }
		#note { padding: 20px; color: #999; font-size: 14px; line-height: 18px; margin: 0 auto; max-width: 720px; }
	</style>

	<!-- the script -->
	<script src="javascripts/Bubbles.js"></script>


</head><body><h1>CryptoWatson ðŸ¤–</h1>

	<!-- placeholder -->
	<div id="chat"></div>

	<!-- notes -->
	<section id="note">
		<p>
			<strong>Note:</strong>  This chatbot was made thanks IBM Cloud Technology and an open-source UI library <a target="_blank" href="https://github.com/dmitrizzle/chat-bubble">bubble-chat</a>.
		</p>
	</section>

	<script src="javascripts/jquery-3.2.1.js"></script>

	<!-- initialize bubbles -->
	<script>
		var givemeBubbles = new Bubbles(document.getElementById("chat"), "givemeBubbles", {
			inputCallbackFn: function(o){
				console.log(o);
                $.ajax({
                    type: "POST",
                    url: "/",
                    data: {input: o.input},
                    dataType: 'json',
                    success: function (res) {
                        //console.log(res);
						givemeBubbles.talk({ "ice": { "says": [ res ] } });
                    },
                    error: function (data) {
                        console.log('Error:', data);
                    }
                });

			}
		});
		givemeBubbles.talk({ "ice": { "says": [ "Hiiiiiii! ðŸ˜Š" ] } });
		givemeBubbles.talk({ "ice": { "says": [ "I'm CryptoWatson, your cryptocurrency assistant! ðŸ’ª" ] } });
	</script>
</body>
</html>
